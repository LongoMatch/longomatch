Index: gst-plugins-bad/gst-libs/gst/dshow/gstdshow.cpp
===================================================================
--- gst-plugins-bad.orig/gst-libs/gst/dshow/gstdshow.cpp
+++ gst-plugins-bad/gst-libs/gst/dshow/gstdshow.cpp
@@ -23,6 +23,10 @@
 #include "gstdshowfakesink.h"
 #include "gstdshowfakesrc.h"
 
+#ifdef _MSC_VER
+#include "msvc-crt-compat.h"
+#endif
+
 CFactoryTemplate g_Templates[]=
 {
   { 
Index: gst-plugins-bad/msvc-crt-compat.h
===================================================================
--- /dev/null
+++ gst-plugins-bad/msvc-crt-compat.h
@@ -0,0 +1,16 @@
+#ifndef __MSVC_CRT_COMPAT_H__
+#define __MSVC_CRT_COMPAT_H__
+
+/* Because of annoying CRTs */
+#ifdef _MSC_VER
+#  define open _open
+#  define close _close
+#  define read _read
+#  define write _write
+#  define lseek _lseek
+#  define fdopen _fdopen
+#  define dup _dup
+#  define strupr _strupr
+#endif
+
+#endif /* __MSVC_CRT_COMPAT_H__ */
Index: gst-plugins-bad/sys/dshowdecwrapper/gstdshowutil.cpp
===================================================================
--- gst-plugins-bad.orig/sys/dshowdecwrapper/gstdshowutil.cpp
+++ gst-plugins-bad/sys/dshowdecwrapper/gstdshowutil.cpp
@@ -24,6 +24,10 @@
 #include "gstdshowutil.h"
 #include "gstdshowfakesrc.h"
 
+#ifdef _MSC_VER
+#include "msvc-crt-compat.h"
+#endif
+
 IPin * 
 gst_dshow_get_pin_from_filter (IBaseFilter *filter, PIN_DIRECTION pindir)
 {
